version: 2.1

jobs:
  general-checking:
    docker:
      - image: amazon/aws-cli 
    steps:
      - checkout
      - run:
          name: General checking
          command: |
            pwd
            whoami
            ls -l
            echo "Listing exports variable WorkflowID"
            aws cloudformation \
              list-exports --query "Exports[?Name==\`WorkflowID\`].Value" \
               --no-paginate --output text | cat -n
            echo "Listing stacks"
            aws cloudformation list-stacks --query "StackSummaries[*].StackName" \
              --stack-status-filter CREATE_COMPLETE --no-paginate --output text | cat -n
    
workflows:
  default:
    jobs:
      - general-checking

